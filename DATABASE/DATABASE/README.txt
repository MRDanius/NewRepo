README.txt

I. О системе
База данных предназначена для учёта штрафов ПДД. Позволяет:
- Вести реестр городов и водителей
- Управлять типами штрафов и их размерами
- Фиксировать нарушения с привязкой к водителям и городам
- Отслеживать статус оплаты штрафов
- Формировать статистику по нарушениям

Практическое применение: система может использоваться в ГИБДД, автошколах или логистических компаниях для автоматизации учёта нарушений ПДД.

II. Руководство пользователя

1.Форматы данных в текстовых файлах:
- cities.txt: [ID:5][Название]
- drivers.txt: [ID:5][ФИО][Дата_рождения][ID_города]
- fines.txt: [ID:5][Сумма][Тип_нарушения]
- registry.txt: [ID:5][ID_водителя][ID_города][ID_штрафа][Оплачен(0/1)]

2. Руководство по интерфейсу

Главное меню:
2.1 Управление городами 
   - Просмотр списка городов
   - Добавление/удаление городов
   - Автоматическая генерация ID

2.2 Управление водителями
   - Просмотр всех водителей
   - Добавление с валидацией ФИО и даты рождения
   - Удаление с очисткой связанных нарушений

2.3 Управление штрафами
   - Просмотр типов штрафов
   - Добавление новых штрафов (сумма + описание)
   - Удаление штрафов при отсутствии нарушений

2.4 Управление нарушениями
   - Просмотр всех нарушений
   - Привязка штрафа к водителю
   - Отметка об оплате штрафа

2.5 Статистика
   - Количество нарушений по городам
   - Топ-5 водителей с наибольшим числом нарушений

2.6 Выход
   - Автоматическое сохранение данных во все файлы
   - Завершение работы программы

Детализация подменю:

2.1.1 Список городов - вывод в формате ID + название
2.1.2 Добавить город - ввод названия, авто-ID
2.1.3 Удалить город - каскадное удаление связанных данных

2.2.1 Список водителей - таблица с основными данными
2.2.2 Добавить водителя - с выбором города из списка
2.2.3 Удалить водителя - по ID с очисткой нарушений

2.3.1 Список штрафов - ID, сумма и тип нарушения
2.3.2 Добавить штраф - ввод числовой суммы и описания
2.3.3 Удалить штраф - только если нет связанных нарушений

2.4.1 Все нарушения - полный список с статусом оплаты
2.4.2 Добавить нарушение - выбор водителя и типа штрафа
2.4.3 Отметить оплату - изменение статуса нарушения

2.5.1 Нарушения по городам - группировка по месту регистрации
2.5.2 Топ нарушителей - ранжированный список водителей

III. Назначение файлов

CityTable.cpp:
- Управление городами (добавление/удаление)
- Использует хэш-таблицу для быстрого поиска по ID
- Формат хранения: связный список

DriverTable.cpp:
- Работа с водителями
- Валидация данных через регулярные выражения
- Автоматическое обновление ссылок при удалении городов

FineRegistry.cpp:
- Учёт нарушений с привязкой к водителям и штрафам
- Механизм пометки об оплате
- Статистические выборки

IntHashMap.cpp:
- Реализация хэш-таблицы с двойным хэшированием
- Используется для O(1) доступа к записям по ID

UserInterface.cpp:
- Консольный интерфейс с многоуровневым меню
- Валидация ввода данных
- Форматированный вывод таблиц

IV. Используемые библиотеки

Во всех таблицах (CityTable, DriverTable и др.):
- <fstream> - загрузка/сохранение в текстовые файлы
- <sstream> - парсинг строк при загрузке данных
- <iomanip> - форматирование вывода (setw, left)
- <set> - генерация уникальных ID

В UserInterface.cpp:
- <regex> - валидация даты и ФИО
- <algorithm> - проверка корректности ввода (all_of)
- <clocale> - поддержка кириллицы в консоли

В IntHashMap.cpp:
- <cmath> - вычисление хэшей и проверка простых чисел

V. Ограничения системы

Идентификаторы:
- Максимальный ID: 2147483647 (ограничение int)
- Минимальный ID: 1
- Автогенерация ID пропускает "дыры"

Данные:
- Название города: до 255 символов
- ФИО водителя: до 100 символов, только буквы/пробелы
- Тип штрафа: до 50 символов
- Дата: строго ДД.ММ.ГГГГ
- Сумма штрафа: до 1 млн руб.



VI. Некоторые методы и функции и информация по ним.
- line.substr(0, ID_LENGTH)
Вырезает первые ID_LENGTH символов из строки. Например, если ID_LENGTH = 5, для строки "123 speed" получим "123 ".

- id_str.find_last_not_of(' ')
Находит позицию последнего символа, который не является пробелом.
Например, для "123 " вернет 2 (индекс символа '3').

- stoi(id_str)
Конвертирует строку в целое число. Если строка пуста или содержит нечисловые символы, возникнет исключение.

- setw()
Устанавливает ширину поля вывода. Например, setw(5) означает, что значение будет занимать ровно 5 символов.

- Модификатор left
Выравнивает текст по левому краю в пределах заданной ширины.
Без left числа выравниваются по правому краю: " 42".

-Функция all_of()
Проверяет, удовлетворяют ли все элементы диапазона [name.begin(), name.end()) условию
[](char c) { ... } — принимает символ c и возвращает bool
    Допустимые имена:
        Иван Иванов
        Анна-Мария Петрова

    Недопустимые имена:
        Иван123 (цифры).
        Иван! (спецсимвол).

-cin.ignore(...) — очищает буфер ввода до символа новой строки.

- regex pattern(R"(^(0[1-9]|[12][0-9]|3[01])\.(0[1-9]|1[0-2])\.\d{4}$)");
это регулярное выражение проверяет, соответствует ли строка формату ДД.ММ.ГГГГ
День: (0[1-9]|[12][0-9]|3[01])
    0[1-9] — дни от 01 до 09.
    [12][0-9] — дни от 10 до 29.
    3[01] — дни 30 или 31.
Месяц: (0[1-9]|1[0-2])
    0[1-9] — месяцы от 01 до 09.
    1[0-2] — месяцы 10, 11, 12.
Год: \d{4}
    \d — любая цифра.
    {4} — ровно 4 цифры (например, 2023).
Точка . в регулярных выражениях означает "любой символ". Чтобы она трактовалась как литерал, используется экранирование: \.
Примеры корректных дат:
    31.12.2023
    01.01.2000
